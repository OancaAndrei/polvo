// Generated by CoffeeScript 1.6.3
(function() {
  (require('source-map-support')).install({
    handleUncaughtExceptions: false
  });

  module.exports = function(options, on_data, on_error) {
    var Cli, argv, cli, compiler, debug, error, info, log, server, version, warn, _ref;
    if (options == null) {
      options = {};
    }
    global.cli_options = options;
    global.__stdout = on_data;
    global.__stderr = on_error;
    version = require('./utils/version');
    log = require('./utils/log')('polvo');
    Cli = require('./cli');
    _ref = log, error = _ref.error, warn = _ref.warn, info = _ref.info, debug = _ref.debug, log = _ref.log;
    argv = (cli = new Cli).argv;
    if (argv.version) {
      return log(version);
    }
    if (argv.compile || argv.watch || argv.release) {
      log('Initializing..'.grey);
      compiler = require('./core/compiler');
    }
    if (argv.server) {
      server = require('./core/server');
    }
    if (argv.compile || argv.watch) {
      compiler.build();
      if (argv.server) {
        server();
      }
      return;
    }
    if (argv.release) {
      compiler.release();
      if (argv.server) {
        server();
      }
      return;
    }
    return log(cli.help());
  };

}).call(this);

/*
//@ sourceMappingURL=polvo.map
*/
