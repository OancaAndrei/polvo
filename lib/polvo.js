// Generated by CoffeeScript 1.6.3
(require('source-map-support')).install({
  handleUncaughtExceptions: false
});

module.exports = function(options, io) {
  var argv, cli, compiler, config, debug, error, info, log, logger, server, version, warn;
  if (options == null) {
    options = {};
  }
  global.cli_options = options;
  global.__stdout = (io != null ? io.out : void 0) || null;
  global.__stderr = (io != null ? io.err : void 0) || null;
  cli = require('./cli');
  version = require('./utils/version');
  logger = require('./utils/logger')('polvo');
  argv = cli.argv();
  error = logger.error, warn = logger.warn, info = logger.info, debug = logger.debug, log = logger.log;
  if (argv.version) {
    return log(version);
  } else if (argv.compile || argv.watch || argv.release) {
    config = require('./utils/config').parse();
    if (config != null) {
      compiler = require('./core/compiler');
      if (argv.server && (config != null)) {
        server = require('./core/server');
      }
      if (argv.compile || argv.watch) {
        compiler.build();
        if (argv.server) {
          return server();
        }
      } else if (argv.release) {
        compiler.release();
        if (argv.server) {
          return server();
        }
      }
    }
  } else {
    return log(cli.help());
  }
};

/*
//@ sourceMappingURL=polvo.map
*/
