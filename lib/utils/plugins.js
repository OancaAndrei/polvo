// Generated by CoffeeScript 1.6.3
(function() {
  var app_manifest, dirs, fs, path, plugins, polvo_manifest, scan, util, _;

  _ = require('lodash');

  fs = require('fs');

  path = require('path');

  util = require('util');

  dirs = require('../utils/dirs');

  plugins = [];

  scan = function(manifest) {
    var err, plugin, _results;
    _results = [];
    for (plugin in manifest.dependencies) {
      try {
        _results.push(plugin = require(path.join(dirs.root, 'node_modules', plugin)));
      } catch (_error) {
        err = _error;
        continue;
      }
    }
    return _results;
  };

  polvo_manifest = path.join(dirs.root, 'package.json');

  if (fs.existsSync(polvo_manifest)) {
    scan(require(polvo_manifest));
  }

  app_manifest = path.join(dirs.pwd, 'package.json');

  if (fs.existsSync(app_manifest)) {
    scan(require(app_manifest));
  }

  module.exports = plugins;

}).call(this);

/*
//@ sourceMappingURL=plugins.map
*/
