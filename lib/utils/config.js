// Generated by CoffeeScript 1.6.3
(function() {
  var config, debug, dirs, error, fs, info, parse_config, path, polvo_yml, warn, yml, _ref;

  path = require('path');

  fs = require('fs');

  yml = require('js-yaml');

  dirs = require('./dirs');

  _ref = require('./log')('utils/config'), error = _ref.error, warn = _ref.warn, info = _ref.info, debug = _ref.debug;

  parse_config = function(config_file) {
    var config, dirpath, index, _i, _len, _ref1, _ref2, _ref3, _ref4;
    config = require(config_file);
    _ref1 = config.input;
    for (index = _i = 0, _len = _ref1.length; _i < _len; index = ++_i) {
      dirpath = _ref1[index];
      config.input[index] = path.join(dirs.pwd, dirpath);
    }
    if (config.output.js != null) {
      config.output.js = path.join(dirs.pwd, config.output.js);
    }
    if (config.output.css != null) {
      config.output.css = path.join(dirs.pwd, config.output.css);
    }
    if (config != null ? (_ref2 = config.server) != null ? _ref2.root : void 0 : void 0) {
      config.server.root = path.join(dirs.pwd, config.server.root);
    }
    if (config.minify != null) {
      config.minify.js = (_ref3 = config.minify.js) != null ? _ref3 : true;
      config.minify.css = (_ref4 = config.minify.css) != null ? _ref4 : true;
    } else {
      config.minify = {
        js: true,
        css: true
      };
    }
    return config;
  };

  polvo_yml = path.join(dirs.pwd, "polvo.yml");

  if (fs.existsSync(polvo_yml)) {
    config = parse_config(polvo_yml);
  } else {
    config = null;
    error("Config file " + 'polvo.yml'.bold + " not found in ~> " + dirs.pwd);
    process.exit();
  }

  module.exports = config;

}).call(this);

/*
//@ sourceMappingURL=config.map
*/
